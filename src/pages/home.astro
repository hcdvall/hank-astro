---
import MainLayout from '../layouts/MainLayout.astro';
import { getCollection } from 'astro:content';

const allProjects = await getCollection('projects');
const highlightedProjects = allProjects
  .filter(p => p.data.highlight)
  .sort((a, b) => b.data.startDate.valueOf() - a.data.startDate.valueOf())
  .slice(0, 3);
---
<head>
  <title>Home | Henrik Sedvall</title>
</head> 

<MainLayout>
  <!-- About -->
   <section class="section about-section">
    <h2>Hello there!</h2>
    <div class="about-flex">
      <img src="/favicon.svg" alt="Henrik Sedvall" class="about-img" />
      <div class="about-text">
        <p>
          üëãüèº I‚Äôm Henrik. I‚Äôve been slinging code and making poor design decisions professionally since 2017.
        </p>
      </div>
    </div>
   </section>
   
  <!-- Highlighted Projects -->
  <section class="section">
    <h2>featured</h2>
    <div class="project-grid">
      {highlightedProjects.length === 0 && <p>No highlighted projects yet.</p>}
      {highlightedProjects.map(project => (
        <a href={`/projects/${project.slug}/`} class="project-card">
          <div class="project-img-wrapper">
            {project.data.heroImg && (
              <img src={project.data.heroImg} alt={project.data.title} class="project-img" />
            )}
            <div class="project-title-overlay">{project.data.title}</div>
          </div>
          <div class="project-info">
            <p>{project.data.description}</p>
          </div>
        </a>
      ))}
    </div>
  </section>

  <!-- Skills -->
  <section class="section skills-section">
    <h2>skills</h2>
    <div class="skills-grid">
      <div class="skill-category">
        <h3>Game Engines</h3>
        <ul>
          <li>Unity 3D/2D</li>
          <li>Unreal Engine</li>
          <li>Godot</li>
        </ul>
      </div>
      <div class="skill-category">
        <h3>Programming</h3>
        <ul>
          <li>C# / C++</li>
          <li>JavaScript / TypeScript</li>
          <li>Python</li>
        </ul>
      </div>
      <div class="skill-category">
        <h3>Specialties</h3>
        <ul>
          <li>Gameplay Systems</li>
          <li>Physics & AI</li>
          <li>Performance Optimization</li>
        </ul>
      </div>
    </div>
  </section>

  <!-- Experience Timeline -->
  <section class="section experience-section">
    <h2>experience</h2>
    <div class="experience-timeline">
      <div class="experience-item">
        <div class="experience-date">2025</div>
        <h3 class="experience-title">Senior Developer</h3>
        <div class="experience-company">Consid</div>
        <p class="experience-description">
          Leading development of next-generation VR experiences and optimizing game performance across multiple platforms. 
          Mentoring junior developers and establishing best practices.
        </p>
      </div>

      <div class="experience-item">
        <div class="experience-date">2023</div>
        <h3 class="experience-title">AI Programmer</h3>
        <div class="experience-company">Dimfrost Studio</div>
        <p class="experience-description">
          Developed gameplay systems and implemented AI behaviors for multiple indie titles. 
          Specialized in performance optimization and cross-platform deployment.
        </p>
      </div>

      <div class="experience-item">
        <div class="experience-date">2019 - 2024</div>
        <h3 class="experience-title">Machine Learning Engineer</h3>
        <div class="experience-company">Advectas / Capgemini</div>
        <p class="experience-description">
          Leading development of next-generation VR experiences and optimizing game performance across multiple platforms. 
          Mentoring junior developers and establishing best practices.
        </p>
      </div>

      <div class="experience-item">
        <div class="experience-date">2017 - 2018</div>
        <h3 class="experience-title">Software Engineer</h3>
        <div class="experience-company">Ericsson</div>
        <p class="experience-description">
          Started career working on mobile games and learning industry best practices. 
          Gained experience with agile development and collaborative workflows.
        </p>
      </div>
    </div>
  </section>

  <style>
    * {
      margin: 0;
      padding: 0;
    }
    
    .section {
      padding: 0rem 1rem 1rem;
      max-width: 1200px;
      margin: 0 auto 1rem auto;
      border: 2px solid var(--dracula-green);
      border-radius: 0.05rem;
      background: var(--background-color);
      /* Add a glow to the border dots: */
      box-shadow:
        0 0 2px 0px var(--dracula-green), /* Outer glow */
        0 2px 2px rgba(0,0,0,0.04);
    }

    .section h2 {
      font-size: 40px;
      color: var(--navbar-glow-color);
      text-align: center;
      margin-bottom: 0.5rem;
      font-family: 'VT323'; /* Already matches */
      text-shadow: 
        0px 0px 3px var(--navbar-glow-color), 
        0px 0px 3px var(--navbar-glow-color); 
      font-weight: normal; 
      letter-spacing: normal;
      border-bottom: dotted 4px;
    }

    .about-flex {
      display: flex;
      align-items: center;
      gap: 2rem;
    }

    .about-img {
      width: 160px;
      height: 160px;
      object-fit: cover;
      border-radius: 50%;
      box-shadow: 0 0 12px var(--dracula-green, #50fa7b);
      flex-shrink: 0;
      margin-top: 1.0rem;
      margin-bottom: 0.5rem;
    }

    .about-text {
      flex: 1;
    }

    .project-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1rem;
      padding: 1rem 0 0 0;
    }

    .project-card {
      background: var(--dracula-background);
      border-radius: 0.2rem;
      overflow: hidden;
      text-decoration: none;
      color: inherit;
    }

    .project-card:hover {
      
      box-shadow: 0 8px 24px rgba(0,0,0,0.4);
      background: var(--dracula-pink);
    }

    .project-img-wrapper {
      position: relative;
      width: 100%;
      height: 200px;
      overflow: hidden;
    }

    .project-img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      filter: blur(6px);
      transition: filter 0.0s;
    }

    .project-card:hover .project-img {
      filter: blur(0);
    }

    .project-title-overlay {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: var(--dracula-orange);
      font-family: 'VT323', monospace;
      font-size: 2.8rem; /* Larger title */
      text-shadow: 0 0 8px var(--dracula-background), 0 0 3px var(--navbar-glow-color);
      z-index: 2;
      pointer-events: none;
      text-align: center;
      width: 90%;
      white-space: pre-line;
      transition: opacity 0.3s;
      opacity: 1;
    }

    .project-card:hover .project-title-overlay {
      opacity: 0; /* Hide title on hover */
    }

    .project-info {
      padding: 1.5rem;
      border: 1.5px solid var(--dracula-foreground);
    }

    .project-info p {
      line-height: 1.6;
    }

    .skills-section {
      padding: 0rem 1rem 1rem;
      max-width: 1200px;
      margin: 1rem auto;
    }

    .skills-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      justify-items: stretch;
      text-align: center;
    }

    .skill-category {
      padding: 0.5rem 0;

    }

    .skill-category h3 {
      color: var(--dracula-cyan);
      margin-bottom: 0.5rem;
      font-size: 1.3rem;
      font-weight: 600;
      letter-spacing: 0.5px;
    }

    .skill-category ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .skill-category li {
      display: inline-block;
      background: transparent; /* fallback if custom property missing */
      border: 1.5px solid var(--dracula-foreground);
      color: var(--dracula-foreground);
      padding: 0.3em 1em;
      margin: 0.2em 0.3em;
      border-radius: 0.5em;
      font-size: 1rem;
      font-family: inherit;
      transition: background 0.2s, color 0.2s;
      box-shadow: 0 1px 4px rgba(0,0,0,0.08);
    }

    .skill-category li:hover {
      background: var(--dracula-pink, #ff79c6);
      color: #fff;
    }

    .experience-section {
      position: relative;
      padding: 0rem 1rem 1rem;
    }

    .experience-timeline {
      position: relative;
      max-width: 800px;
      margin: 2rem auto 0;
    }

    .experience-item {
      position: relative;
      margin-bottom: 2rem;
      padding: 0rem 1.5rem 0rem 2.5rem;
      transition: transform 0.3s ease;
    }

    .experience-item:hover {
      transform: translateX(2px);
    }

    .experience-date {
      color: var(--dracula-comment);
      font-size: 1.2rem;
      margin-bottom: 0.5rem;
      font-family: 'VT323', monospace;
    }

    .experience-title {
      color: var(--dracula-cyan);
      font-size: 1.3rem;
      margin-bottom: 0.5rem;
    }

    .experience-company {
      color: var(--dracula-orange);
      margin-bottom: 0.8rem;
      font-size: 1.1rem;
    }

    .experience-description {
      line-height: 1.6;
    }

    @media (max-width: 768px) {
      .section {
        padding: 0rem 0.5rem 0rem 0.5rem;
        margin: 0 auto 1rem auto;
        padding-bottom: 0.5rem
      }

      .about-flex {
        flex-direction: column;
        align-items: center;
        text-align: center;
        margin-top: 1.0rem;
        margin-bottom: 0.5rem;
      }

      .experience-timeline {
        margin-top: 2rem;
        padding-left: 0rem;
      }

      .experience-item {
        justify-content: center;
        padding: 0rem
      }

      .skills-section {
        padding: 0rem 0rem 1rem;
      }
      
      .skills-grid {
        grid-template-columns: 1fr;
        text-align: center;
        justify-items: stretch;
        justify-content: center;
      }
      
      .skill-category {
        padding: 1rem;
      }
    }
  </style>

</MainLayout>